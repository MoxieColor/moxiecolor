{%- comment -%}
  Include: cv_section.html
  Usage:
    {% include cv_section.html title="Solo Exhibitions" key="solo" %}

  Data shape (in _data/cv.yml):
    solo:
      - year: 2023           # numeric; used for sorting
        end: 2024            # optional; display only
        year_label: ""       # optional explicit label; overrides start/end if present
        entries:
          - title: "Throughline"
            venue: "Link Community Clinic"
            location: "Tacoma, WA"
{%- endcomment -%}

<div class="cv-section{% if include.class %} {{ include.class }}{% endif %}">
  {%- if include.title -%}
    <h2>{{ include.title }}</h2>
  {%- endif -%}

  {%- comment -%} Sort by start year (descending) {%- endcomment -%}
  {%- assign rows = site.data.cv[include.key] | sort: "year" | reverse -%}

  {%- for row in rows -%}
    {%- comment -%} Build the left-column label (supports ranges and custom text) {%- endcomment -%}
    {%- assign year_label = row.year -%}
    {%- if row.year_label and row.year_label != "" -%}
      {%- assign year_label = row.year_label -%}
    {%- elsif row.end -%}
      {%- assign year_label = row.year | append: "–" | append: row.end -%}
    {%- endif -%}

    <div class="cv-row">
      <div class="cv-year">{{ year_label }}</div>

      <div class="cv-details">
        {%- for e in row.entries -%}
          <div class="cv-item">
            {%- if e.title -%}
              {%- if e.url -%}<a href="{{ e.url }}">{%- endif -%}
              <em>{{ e.title }}</em>
              {%- if e.url -%}</a>{%- endif -%}
              {%- if e.venue -%}{% if e.title %}, {% endif %}{{ e.venue }}{%- endif -%}
              {%- if e.location -%}{% if e.title or e.venue %}, {% endif %}{{ e.location }}{%- endif -%}
              {%- if e.details -%} — {{ e.details }}{%- endif -%}
              {%- if e.note -%} <span class="cv-note">({{ e.note }})</span>{%- endif -%}
            {%- else -%}
              {{ e }}
            {%- endif -%}
          </div>
        {%- endfor -%}
      </div>
    </div>
  {%- endfor -%}
</div>
