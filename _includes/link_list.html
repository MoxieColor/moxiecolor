<ul class="{{ include.class | default: 'links' }}">
  {% assign items  = include.items  | default: site.data.links.footer %}
  {% assign sprite = '/assets/icons.svg?v=2' | relative_url %}

  {% for item in items %}
    {% assign external = item.url contains '://' or item.url contains 'mailto:' %}

    {%- comment -%} Build safe internal URL: force leading "/" then expand baseurl {%- endcomment -%}
    {% assign url = item.url %}
    {% unless external %}
      {% unless url | slice: 0, 1 == '/' %}{% assign url = '/' | append: url %}{% endunless %}
      {% assign url = url | relative_url %}  {# -> /moxiecolor/newsletter/ on GH Pages #}
    {% endunless %}

    <li>
      <a
        href="{% if external %}{{ item.url }}{% else %}{{ url }}{% endif %}"
        class="link {{ item.icon | default: 'globe' }}"
        aria-label="{{ item.label }}"
        {% if external %}target="_blank" rel="noopener"{% endif %}
      >
        <svg class="icon" width="20" height="20" aria-hidden="true">
          <use href="{{ sprite }}#{{ item.icon | default: 'globe' }}"></use>
          <use xlink:href="{{ sprite }}#{{ item.icon | default: 'globe' }}"></use>
        </svg>

        {% if include.show_text == false or include.show_text == 'false' %}
          <span class="sr-only">{{ item.label }}</span>
        {% else %}
          <span class="label">{{ item.label }}</span>
        {% endif %}
      </a>
    </li>
  {% endfor %}
</ul>

